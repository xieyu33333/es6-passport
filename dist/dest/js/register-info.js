!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("vendors")):"function"==typeof define&&define.amd?define(["vendors"],n):"object"==typeof exports?exports.pass=n(require("vendors")):e.pass=n(e.vendors)}(this,function(e){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=3)}([function(e,n){e.exports=vendors},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,n){return fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include",params:n}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()})},o=function(e,n){return fetch(e,{method:"GET",headers:{},credentials:"include",params:n}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()})};n.fetchPost=r,n.fetchJson=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={domSelector:function(e){return window.document.querySelector(e)},getUrlParams:function(e){var n=location.search.replace(/^\?/,""),t={};return n.split("&").map(function(e){var n=e.split("=");t[n[0]]=n[1]}),e?t[e]:t},obj2query:function(e){if(e){var n=Object.keys(e).filter(function(n){return""!==e[n]&&null!==e[n]}).map(function(n){return n+"="+e[n]}).join("&");return n.length>0?"?"+n:null}},hasClass:function(e,n){return e.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))},addClass:function(e,n){e.className.trim(),r.hasClass(e,n)||(e.className+=" "+n)},removeClass:function(e,n){if(r.hasClass(e,n)){var t=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(t," ")}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},bindEvent:function(){var e=void 0,n=void 0,t=void 0,r=function n(t,r,o){t!==o&&(document.querySelector(r).className===t.className?e=t:n(t.parentNode,r,o))},o=arguments[0],i=arguments[1];"string"==typeof arguments[2]?(n=arguments[2],"function"==typeof arguments[3]&&(t=arguments[3])):"function"==typeof arguments[2]&&(t=arguments[2]),o.addEventListener(i,function(i){n?n&&(r(i.target,n,o),e&&t.call(e,{target:e})):t.call(o,i)})}};n.default=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.regInfo=void 0,t(4);var r=t(10),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e){(0,o.default)(e)};n.regInfo=i},function(e,n,t){"use strict";t(5),t(6),t(7),t(8),t(9)},function(e,n,t){e.exports=t(0)(125)},function(e,n,t){e.exports=t(0)(126)},function(e,n,t){e.exports=t(0)(328)},function(e,n,t){e.exports=t(0)(332)},function(e,n,t){e.exports=t(0)(333)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),a=t(11),u=r(a),c=t(2),s=r(c),l=t(12),f=r(l),d=s.default.domSelector,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return'<div id="register-info-wrapper" class="register-info-wrapper">\n        <form id="register-info-form" onsubmit="return false">\n            <label>\n                <span>昵称：</span>\n                <input id="register-info-nickname" name="nickname" type="text" placeholder="昵称" valid="present" value="'+(e.nickname||"")+'">\n            </label>\n            <label>\n                <span>电子邮箱：</span>\n                <input id="register-info-email" name="email" type="text" placeholder="电子邮箱" valid="present, email" value="'+(e.email||"")+'">\n            </label>\n            <label>\n                <span>真实姓名：</span>\n                <input id="register-info-realname" name="realname" type="text" placeholder="真实姓名" value="'+(e.realname||"")+'">\n            </label>\n            <label>\n                <span>性别：</span>\n                <select id="register-info-sex" name="sex" value="'+(e.sex||"")+'">\n                    <option value="1">男</option>\n                    <option value="2">女</option>\n                </select>\n            </label>\n            <label>\n                <span>生日：</span>\n                <input id="register-info-birthday" name="birthday" type="date" placeholder="生日" value="'+(e.birthday||"")+'">\n            </label>\n            <label>\n                <span>居住地：</span>\n                <div id="register-info-address"></div>\n            </label>\n            <label>\n                <span>&nbsp;</span>\n                <input id="register-info-btn" type="submit" value="下一步">\n            </label>\n        </form>\n    </div>'};n.default=function(){var e=o(regeneratorRuntime.mark(function e(n){var t,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.update){e.next=7;break}return e.next=3,(0,i.fetchJson)("/profile",{});case 3:t=e.sent,200===t.code?(n.container.innerHTML=p(t.data),d("#register-info-btn").value="保 存",r=t.data.regionCode?t.data.regionCode.split(",").map(function(e){return parseInt(e)}):"",o=new u.default({container:document.getElementById("register-info-address"),name:"region",initData:r}),(0,f.default)(n)):alert("数据拉取失败"),e.next=10;break;case 7:n.container.innerHTML=p(),a=new u.default({container:document.getElementById("register-info-address"),name:"region"}),(0,f.default)(n);case 10:case"end":return e.stop()}},e,void 0)}));return function(n){return e.apply(this,arguments)}}()},function(e,n,t){"use strict";function r(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(2),u=function(e){return e&&e.__esModule?e:{default:e}}(a),c=t(1),s=u.default.domSelector,l=u.default.isArray,f=Symbol("render"),d=function(){function e(n){if(o(this,e),!n.container)throw"请填写container配置";if(!n.name)throw"请填写name配置";this[f](n)}return i(e,[{key:f,value:function(){function e(e){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function e(n){var t,r,o,i,a,u,f,d,p,m,v,h,g,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fetchJson)("/region-data",{});case 2:t=e.sent,t=t.data,r='\n        <div class="region-select-wrapper">\n            <select id="region-province-select"></select>\n            <select id="region-city-select"></select>\n            <select id="region-area-select"></select>\n            <input id="region-selected" name="'+n.name+'" type="hidden" valid="'+(n.present?"present":"")+'">\n        </div>\n        ',n.container.innerHTML=r,o=s("#region-province-select"),i=s("#region-city-select"),a=s("#region-area-select"),u=s("#region-selected"),f=void 0,d=void 0,p=void 0,m="<option></option>",t.forEach(function(e){m+='<option value="'+e.id+'">'+e.name+"</option>"}),o.innerHTML=m,v=function(e){var n=e||parseInt(o.value),r=t[n-1].city,a="";f=n,r.forEach(function(e){a+='<option value="'+e.id+'">'+e.name+"</option>"}),i.innerHTML=a,e&&(o.value=e)},h=function(e){var n=t[f-1].city.filter(function(e){return e.id===parseInt(i.value)})[0].district,r="";d=parseInt(i.value),n.forEach(function(e){r+='<option value="'+e.id+'">'+e.name+"</option>"}),a.innerHTML=r,e&&(i.value=e)},g=function(e){p=parseInt(a.value),u.value=f+","+d+","+p,e&&(a.value=e)},n.initData&&l(n.initData)&&(y=n.initData,y[0]&&v(y[0]),y[1]&&h(y[1]),y[2]&&g(y[2])),o.onchange=function(e){v(),h(),g()},i.onchange=function(e){h(),g()},a.onchange=function(e){g()};case 23:case"end":return e.stop()}},e,this)}));return e}()}]),e}();n.default=d},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),a=t(2),u=r(a),c=t(13),s=r(c),l=u.default.domSelector;n.default=function(e){var n=l("#register-info-btn"),t=l("#register-info-form"),r=new s.default({form:document.getElementById("register-info-form")}),a={nickname:"昵称",email:"电子邮箱"};n.onclick=o(regeneratorRuntime.mark(function n(){var o,u,c,s,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.check(),u={},Array.from(t.elements).forEach(function(e){e.name&&(u[e.name]=e.value)}),!o.length){n.next=9;break}c=o[0].type,s=o[0].name,"present"===c?alert("请填写您的"+a[s]):alert("请填写正确的"+a[s]),n.next=13;break;case 9:return n.next=11,(0,i.fetchPost)("/register/info",u);case 11:l=n.sent,200===l.code&&e.success&&e.success();case 13:case"end":return n.stop()}},n,void 0)}))}},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(e){return"您填写的"+e+"格式不正确"},a={email:function(e){if(!e.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/))return{type:"email",message:i("邮箱")}},mobile:function(e){if(!e.match(/^1(3|4|5|7|8)\d{9}$/))return{type:"mobile",message:i("手机号")}},IDcard:function(e){return{type:"IDcard",message:i("身份证号")}},present:function(e){if(!e.trim())return{type:"present",message:"必填"}}},u=function(){function e(n){r(this,e),this.opts=n}return o(e,[{key:"check",value:function(e){var n=this.opts.form.elements||document.getElementById(this.opts.form).elements,t=[];return Array.from(n).filter(function(e){return e.getAttribute("valid")}).map(function(e){var n=e.getAttribute("valid").split(", "),r=e.value,o=[];n.forEach(function(e){if(a[e]){var n=a[e](r);n&&o.push(n)}}),o.length&&t.push({dom:e,errorArr:o,name:e.name,message:o[0].message,type:o[0].type})}),t}}]),e}();n.default=u}])});